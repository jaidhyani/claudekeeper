# Claudekeeper

Session coordinator for Claude Code - manages multiple async sessions with attention routing.

## Overview

Claudekeeper is a service that manages Claude Code sessions, surfaces attention needs (permissions, questions, completions), and routes responses. It provides a REST API and WebSocket for real-time events.

## Installation

```bash
npm install
npm run build
```

## Usage

```bash
# Start server in foreground
claudekeeper

# Start server on custom port
claudekeeper --port 3200

# Start as daemon
claudekeeper start --daemon

# Stop daemon
claudekeeper stop

# Check status
claudekeeper status
```

## Configuration

Config is stored in `~/.claudekeeper/config.json`:

```json
{
  "port": 3100,
  "token": "<auto-generated>",
  "autoImport": false,
  "webhooks": []
}
```

## API

### Sessions

- `GET /sessions` - List all sessions
- `GET /sessions/:id` - Get session details
- `POST /sessions` - Create new session
- `DELETE /sessions/:id` - Delete session
- `POST /sessions/:id/spawn` - Spawn process for dormant session
- `POST /sessions/:id/send` - Send message to session
- `POST /sessions/:id/interrupt` - Interrupt running session

### Attention

- `GET /attention` - List pending attention requests
- `POST /attention/:id/resolve` - Resolve an attention request

### Health

- `GET /health` - Health check

## WebSocket

Connect to `ws://localhost:3100?token=<token>` for real-time events:

- `session:created`
- `session:updated`
- `session:ended`
- `session:message`
- `attention:requested`
- `attention:resolved`

## Authentication

All requests require the token either as:
- Bearer token: `Authorization: Bearer <token>`
- Query param: `?token=<token>`
